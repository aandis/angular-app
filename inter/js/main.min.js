jQuery(document).ready(function (a) {
    a("#map_canvas").height(a(window).height() * 0.9 + "px");
    var b = null;
    google.maps.event.addDomListener(window, "load", initializeMap());
    a(document).on("scroll", function (d) {
        var c = a(window).scrollTop();
        var e = a(".main-menu");
        a("header").css("top", 0 + "px");
        if (c > a(window).height() - a(".main-menu").height() * 2) {
            a(".main-menu").addClass("menu-sticked");
            a(".menu-button").css("opacity", "0.7")
        } else {
            a(".menu-button").css("opacity", "1");
            a(".main-menu").removeClass("menu-sticked")
        }
        a.each(a("section"), function (f, h) {
            if (a(h).hasClass(".photos")) {
                a(".photos img").addClass("slideUp")
            }
            if (a(h).hasClass("line-up") && a(h).offset().top < c) {
                a(".artist").addClass("animate")
            }
            if (a(h).hasClass("tickets") && a(h).offset().top < c) {
                a(".tickets ul").addClass("on-top")
            }
            if (a(h).offset().top < c + a(window).height() / 2) {
                if (a(h).hasClass("line-up")) {
                    a(".artist").attr("style", "").addClass("artist-visible")
                }
            }
            if (c > a(h).offset().top) {
                var g = a(h).attr("id");
                a(".main-menu ul li").removeClass("select");
                a('a[href="#' + g + '"]').parent().addClass("select")
            }
        })
    });
    a(".headline h1").fitText(1, {
        minFontSize: "40px",
        maxFontSize: "120px"
    });
    a(".headline h2").fitText(0.8, {
        minFontSize: "35px",
        maxFontSize: "100px"
    });
    a(".headline .date").fitText(1.5, {
        minFontSize: "30px",
        maxFontSize: "65px"
    });
    a(".headline .place").fitText(1, {
        minFontSize: "30px",
        maxFontSize: "75px"
    });
    a("footer h4").fitText(1, {
        minFontSize: "30px",
        maxFontSize: "100px"
    });
    a(".info-container h3").fitText(1, {
        minFontSize: "35px",
        maxFontSize: "50px"
    });
    a(".main-menu ul li a, .next").click(function (d) {
        d.preventDefault();
        a(".main-menu ul li").removeClass("select");
        a(".main-menu ul li a").removeClass("select");
        a(this).parent().addClass("select");
        var c = 0;
        if (a(this.hash).find("h2").offset().top > a(document).height() - a(window).height()) {
            c = a(document).height() - a(window).height()
        } else {
            c = a(this.hash).find("h2").next().offset().top - a(this.hash).find("h2").height() + a(".main-menu").height()
        }
        if (a(this).attr("href") == "#festival") {
            c = a(this.hash).find("h2").offset().top - +a(".main-menu").height()
        }
        // a("html,body").animate({
        //     scrollTop: c
        // }, 1000, "swing");
        if (a(".menu-button").is(":visible") && a(".main-menu ul").is(":visible")) {
            a(".main-menu ul").css("top", "-999px");
            a(".menu-button").text("Menu");
            a(".menu-button").addClass("menu-close")
        }
    });
    a(".menu-button").click(function (c) {
        c.preventDefault();
        if (a(this).hasClass("menu-close")) {
            a(this).text("Close");
            a(this).next("ul").css("top", "0px");
            a(this).removeClass("menu-close").addClass("menu-open")
        } else {
            a(this).text("Menu");
            a(this).next("ul").css("top", "-999px");
            a(this).removeClass("menu-open").addClass("menu-close")
        }
    });
    a(".open, .online h5 a").on("click", function (d) {
        d.preventDefault();
        var c = a(this).data("artist");
        a(".artist-big-container").hide();
        a(".artist-big-container").removeClass("animate").removeClass("animate-inverse");
        a(".artist-" + c).show();
        a(".artist-" + c).addClass("animate");
        a("html,body").animate({
            scrollTop: a(".artist").last().offset().top + a(".artist").last().height() - a(".menu-sticked").height()
        }, 1000, "swing");
        return false
    });
    a(".close").on("click", function (d) {
        d.preventDefault();
        var c = a(this).parent().parent();
        a(c).removeClass("animate");
        a(c).addClass("animate-inverse");
        a("html,body").animate({
            scrollTop: a(".artist:first").offset().top
        }, 1000, "swing", function () {
            a(".artist-big-container").hide();
            a(".artist-big-container").removeClass("animate").removeClass("animate-inverse")
        });
        return false
    })
});

function initializeMap() {
    map = new google.maps.Map(document.getElementById("map_canvas"), {
        zoom: 17,
        scrollwheel: false,
        draggable: false,
        center: new google.maps.LatLng(47.24764448528739, -1.5526342391967773),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    var b = $(".lieux ul li");
    var a = new Array();
    $.each(b, function (d, c) {
        var e = new google.maps.Marker({
            position: new google.maps.LatLng($(c).data("lattitude"), $(c).data("longitude")),
            map: map,
            title: $(c).data("title"),
            icon: $(c).find("a .marker-image-container img").attr("src")
        });
        e.setMap(map);
        google.maps.event.addListener(e, "click", function () {
            map.setCenter(e.getPosition());
            var f = $(".lieux ul li");
            $(".lieux ul li").removeClass("selected");
            $.each(b, function (h, g) {
                if ($(g).data("title") == e.getTitle()) {
                    $(g).addClass("selected")
                }
            })
        });
        a.push(c)
    });
    $(".mentions-legales").hide();
    $("#mentions").click(function () {
        $(".mentions-legales").show();
        $("html,body").animate({
            scrollTop: $(".mentions-legales").offset().top
        }, 1000, "swing")
    });
    map.panTo(new google.maps.LatLng(47.24764448528739, -1.5526342391967773));
    $(".ticket-place").click(function (c) {
        c.preventDefault();
        $("html,body").animate({
            scrollTop: $("#map_canvas").offset().top - $(".main-menu").height()
        }, 1000, "swing");
        map.panTo(new google.maps.LatLng($(this).parent().data("lattitude"), $(this).parent().data("longitude")))
    });
    $(".lieux ul li a").click(function (c) {
        c.preventDefault();
        $(".lieux ul li").removeClass("selected");
        $(this).parent().addClass("selected");
        $("html,body").animate({
            scrollTop: $("#map_canvas").offset().top - $(".main-menu").height()
        }, 1000, "swing");
        map.panTo(new google.maps.LatLng($(this).parent().data("lattitude"), $(this).parent().data("longitude")))
    })
};